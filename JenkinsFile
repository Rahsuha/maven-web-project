pipeline{
agent any

tools{
maven 'maven-3.8.4'
jdk 'jdk-11'
}

stages{
stage("Clean") {
  steps{
      echo "Start Clean"
      bat "mvn clean"
  }
}
stage("Test"){
steps{
  echo "Start Test"
  bat "mvn test"
}
}
stage("Build"){
steps{
  echo "Start build"
  bat "mvn install -DskipTests"
}
}

stage("Sonar Scan"){
	steps{
		withSonarQubeEnv(installationName: 'Sonarqube',credentialsId: 'Sonar-jenkins-token') {
			bat "mvn clean package sonar:sonar"
		}
	}
}
}
}
