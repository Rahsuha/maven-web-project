pipeline{
agent any

tools{
maven 'maven-3.8.4'
jdk 'jdk-11'
}

stages{
stage("Clean") {
  steps{
      echo "Start Clean"
      bat "mvn clean"
  }
}
stage("Test"){
steps{
  echo "Start Test"
  bat "mvn test"
}
}
stage("Build"){
steps{
  echo "Start build"
  bat "mvn install -DskipTests"
}
}

stage("Sonar Scan"){
	steps{
		withSonarQubeEnv(credentialsId: 'Sonar-jenkins-token') {
			bat """
sonar.projectKey=maven-project-jenkins-lab
sonar.projectName=maven-project-jenkins-lab
sonar.sources=src/main
sonar.sourceEncoding=UTF-8
sonar.language=jav
sonar.test=src/test
sonar.junit.reportsPath=target/surefire-reports
sonar.surefire.reportsPath=target/surefire-reports
sonar.jacoco.reportPath=target/jacoco.exec
sonar.java.binaries=target/classes
sonar.java.coveragePlugin=jacoco
"""
		}
	}
}
}
}
